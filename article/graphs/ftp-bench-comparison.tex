\begin{tikzpicture}

%%%%%%%%%%%%%%%%%%%%%%%%
% CPU in the background
%%%%%%%%%%%%%%%%%%%%%%%%
\begin{axis}[
        width  = 0.4*\textwidth,
        height = 5cm,
        major x tick style = transparent,
        ybar=2pt,%space between the bars
        bar width=10pt,
        enlarge x limits={abs=1},
        ylabel = {CPU\#0 usage},
        hide x axis,
        axis y line*=right,
        ymin=0, ymax=100,
        symbolic x coords={Normal, openSSH, OpenVPN, IPSec},
        xtick = data,
        scaled y ticks = false,%Disable the *10^4 exponent applied to all y axis markings.
        legend style={at={(0.5,-0.45)}, anchor=north,legend columns=4},
        enlarge x limits=0.1,
    ]

\addplot[style={black,fill=LimeGreen,postaction={pattern=north east lines},mark=none}]
    coordinates {
        (Normal, 0)
        (openSSH, 89.29)
        (OpenVPN, 76.03)
        (IPSec, 74.64)
    };
    \label{software-cpu}

\addplot[style={black,fill=RedOrange,postaction={pattern=north east lines},mark=none}]
    coordinates {
        (Normal, 0)
        (openSSH, 68.29)
        (OpenVPN, 80.89)
        (IPSec, 17.25)
    };
    \label{hardware-cpu}

\addplot[style={black,fill=gray,postaction={pattern=north east lines},mark=none}]
    coordinates {
        (Normal, 7.16)
        (openSSH, 0)
        (OpenVPN, 0)
        (IPSec, 0)
    };
    \label{Normal-cpu}%"Normal" for "out of tunnel"
\end{axis}

%%%%%%%%%%%%%%%%%%%%%%%%
% throughput
%%%%%%%%%%%%%%%%%%%%%%%%
\begin{axis}[
        % title = {Comparison over file transfer methods},
        width  = 0.4*\textwidth,
        height = 5cm,
        major x tick style = transparent,
        ybar=6pt,
        bar width=6pt,
        enlarge x limits={abs=1},
        ymajorgrids = true,
        ylabel = {Throughtput [MB/s]},
        xlabel = {},
        ymin=0, ymax=12,
        symbolic x coords={Normal, openSSH, OpenVPN, IPSec},
        xtick = data,
        x tick label style={rotate=45,anchor=east},
        scaled y ticks = false,%Disable the *10^4 exponent applied to all y axis markings.
        % legend style={at={(0.5,-0.25)}, anchor=north,legend columns=2},
        legend style={at={(0.5,-0.45)}, anchor=north,legend columns=3},
        enlarge x limits=0.1,
        nodes near coords,
        enlarge y limits={value=0.4,upper},
        every node near coord/.append style={rotate=90, anchor=west},%This needs to be after 'ybar'
    ]

\addplot[style={black,fill=ForestGreen,mark=none}]
    coordinates {
        (Normal, 0)
        (openSSH, 8.19)
        (OpenVPN, 3.87)
        (IPSec, 6.47)
    };
    \label{software}

\addplot[style={black,fill=BrickRed,mark=none}]
    coordinates {
        (Normal, 0)
        (openSSH, 10.39)
        (OpenVPN, 2.84)
        (IPSec, 5.80)
    };
    \label{hardware}

\addplot[style={black,fill=black,mark=none}]
    coordinates {
        (Normal, 11.39)
        (openSSH, 0)
        (OpenVPN, 0)
        (IPSec, 0)
    };
    \label{Normal}%"tp" for "throughput"
\legend{software, hardware, Normal}
\end{axis}

\end{tikzpicture}